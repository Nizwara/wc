#!/bin/bash

# Warna
CYAN='\033[1;36m'
GREEN='\033[1;32m'
YELLOW='\033[1;33m'
ORANGE='\033[38;5;208m'
RED='\033[1;31m'
MAGENTA='\033[1;35m'
NC='\033[0m' # No Color

# Fungsi untuk menampilkan header
display_header() {
  clear
  echo -e "${CYAN}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${NC}"
  echo -e "${CYAN}â•‘${NC}${GREEN}          â–ˆâ–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–ˆ                ${NC}${CYAN}â•‘${NC}"
  echo -e "${CYAN}â•‘${NC}${GREEN}          â”‚ K I L L E R  V P N â”‚                ${NC}${CYAN}â•‘${NC}"
  echo -e "${CYAN}â•‘${NC}${GREEN}          â–ˆâ–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–ˆ                ${NC}${CYAN}â•‘${NC}"
  echo -e "${CYAN}â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£${NC}"
  echo -e "${CYAN}â•‘${NC} ${MAGENTA}ğŸ“… Tanggal: $(date '+%A, %d %B %Y')${NC}         ${CYAN}â•‘${NC}"
  echo -e "${CYAN}â•‘${NC} ${MAGENTA}â° Waktu: $(date '+%H:%M:%S')${NC}                             ${CYAN}â•‘${NC}"
  echo -e "${CYAN}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
}

# Animasi loading sederhana
show_loading() {
  echo -ne "${YELLOW}Memuat..."
  local i=0
  while [ $i -lt 5 ]; do
    echo -n "."
    sleep 0.1
    ((i++))
  done
  echo -e "${NC}"
  clear
}

# Fungsi untuk update otomatis dari GitHub
update_script() {
    echo -e "${YELLOW}Memeriksa pembaruan dari GitHub...${NC}"
    
    # Pindah ke direktori repository
    cd /home/user/wc  # Ganti dengan path ke direktori repository Anda
    
    # Lakukan git pull untuk mengambil perubahan terbaru
    git pull origin main  # Ganti "main" dengan branch yang sesuai jika berbeda
    
    if [ $? -eq 0 ]; then
        echo -e "${GREEN}Pembaruan berhasil!${NC}"
    else
        echo -e "${RED}Gagal melakukan pembaruan. Pastikan repository sudah di-clone dengan benar.${NC}"
    fi

    # Kembali ke direktori sebelumnya
    cd -
    
    # Tunggu input pengguna sebelum kembali ke menu
    read -rp "Tekan Enter untuk kembali ke menu..."
}

# Menu utama
while true; do
  display_header
  
  echo -e "\n${CYAN}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${NC}"
  echo -e "${CYAN}â•‘${NC}${GREEN}          M E N U   U T A M A                   ${NC}${CYAN}â•‘${NC}"
  echo -e "${CYAN}â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£${NC}"
  echo -e "${CYAN}â•‘${NC} ${YELLOW}1. ${ORANGE}ğŸ‘¤  Kelola Akun${NC}                             ${CYAN}â•‘${NC}"
  echo -e "${CYAN}â•‘${NC} ${YELLOW}2. ${ORANGE}ğŸ”’   Kelola SSL${NC}                             ${CYAN}â•‘${NC}"
  echo -e "${CYAN}â•‘${NC} ${YELLOW}3. ${ORANGE}ğŸŒ  Kelola Domain${NC}                           ${CYAN}â•‘${NC}"
  echo -e "${CYAN}â•‘${NC} ${YELLOW}4. ${ORANGE}âš™ï¸  Cek API${NC}                                 ${CYAN}â•‘${NC}"
  echo -e "${CYAN}â•‘${NC} ${YELLOW}5. ${ORANGE}ğŸ”„  Update Script${NC}                           ${CYAN}â•‘${NC}"  # Opsi baru
  echo -e "${CYAN}â•‘${NC} ${YELLOW}0. ${RED}ğŸšª  Keluar${NC}                                  ${CYAN}â•‘${NC}"
  echo -e "${CYAN}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
  
  echo -e "\n${CYAN}â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬${NC}"
  read -p " Pilih opsi [1-5/0]: " pilihan

  case $pilihan in
    1)
      show_loading
      bash akun.sh
      ;;
    2)
      show_loading
      bash ssl_manager.sh
      ;;
    3)
      show_loading
      bash domain_manager.sh
      ;;
    4)
      show_loading
      bash cek_api.sh
      ;;
    5)
      show_loading
      bash update_script.sh  # Panggil fungsi update
      ;;
    0)
      echo -e "\n${RED}â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„${NC}"
      echo -e "${RED}           T E R I M A   K A S I H          ${NC}"
      echo -e "${RED}â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€${NC}"
      sleep 1
      exit 0
      ;;
    *)
      echo -e "${RED}\n[!] Pilihan tidak valid! Silakan coba lagi.${NC}"
      sleep 1.5
      ;;
  esac
done
